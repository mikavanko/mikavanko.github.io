(function(t){function e(e){for(var n,c,o=e[0],i=e[1],l=e[2],d=0,_=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&_.push(a[c][0]),a[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);u&&u(e);while(_.length)_.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,o=1;o<r.length;o++){var i=r[o];0!==a[i]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},a={app:0},s=[];function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=i;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},1725:function(t){t.exports=JSON.parse('{"Error":"","Id":0,"Success":true,"Value":{"Goods":[{"B":false,"C":158,"CV":null,"G":1,"P":1,"Pl":null,"T":1},{"B":false,"C":197,"CV":null,"G":1,"P":99,"Pl":null,"T":2},{"B":false,"C":18,"CV":null,"G":1,"P":31,"Pl":null,"T":3},{"B":false,"C":2.14,"CV":null,"G":2,"P":15,"Pl":null,"T":8},{"B":false,"C":1.52,"CV":null,"G":2,"P":76,"Pl":null,"T":86},{"B":false,"C":5.5,"CV":null,"G":2,"P":100,"Pl":null,"T":126},{"B":false,"C":2.71,"CV":null,"G":5,"P":51,"Pl":null,"T":184},{"B":false,"C":3.95,"CV":null,"G":5,"P":2,"Pl":null,"T":185},{"B":false,"C":1.22,"CV":null,"G":10,"P":51,"Pl":null,"T":194},{"B":false,"C":1.18,"CV":null,"G":15,"P":55,"Pl":null,"T":12},{"B":false,"C":1.55,"CV":null,"G":15,"P":64,"Pl":null,"T":63},{"B":false,"C":1.55,"CV":null,"G":15,"P":77,"Pl":null,"T":64}]}}')},"17f2":function(t,e,r){"use strict";r("9a00")},4110:function(t){t.exports=JSON.parse('{"1":{"G":"Книги","B":{"1":{"N":"Алгоритмы. Построение и анализ. Т. Кормен, Ч. Лейзерсон, Р. Ривест, К. Штайн.","T":1},"2":{"N":"Совершенный код. Стив Макконнелл.","T":1},"3":{"N":"JavaScript. Подробное руководство. Дэвид Флэнаган.","T":1}}},"2":{"G":"Еда","C":2,"B":{"7":{"N":"Овсяные пирожные с шоколадной прослойкой","T":3},"8":{"N":"Суп с пекинской капустой","T":3},"85":{"N":"Вишня в коньяке","T":3},"86":{"N":"Постный фаршированный перец","T":3},"109":{"N":"Салат Подсолнух","T":""},"110":{"N":"Форель «Эрланген»","T":""},"111":{"N":"Салат с морепродуктами","T":3},"112":{"N":"Тёртый пирог","T":3},"115":{"N":"Свинина, маринованная в красном вине, с кориандром","T":""},"116":{"N":"Салат с черносливом и ветчиной","T":""},"125":{"N":"Болгарский перец и цуккини на гриле","T":3},"126":{"N":"Салат «Букет нарциссов»","T":3},"127":{"N":"Салат из морепродуктов, с огурцами, рукколой и оливками","T":3}}},"5":{"G":"Спорт","C":2,"B":{"184":{"N":"Беговая дорожка","T":1},"185":{"N":"Гантели съемные","T":1},"186":{"N":"Ружьё охотничье","T":1},"187":{"N":"Велотренажер","T":1}}},"8":{"G":"Сантехника","C":3,"B":{"4":{"N":"Акриловая ванна Alpen Mars ","T":1},"5":{"N":"Смеситель Sturm Classica","T":1},"6":{"N":"Тумба с раковиной Tiffany World ","T":1}}},"10":{"G":"Запчасти для машин","C":3,"B":{"191":{"N":"Амортизатор задний CX-5 ","T":3},"192":{"N":"Пружина амортизатора ","T":3},"193":{"N":"Корпус воздушного фильтра ","T":3},"194":{"N":"Ремень приводной","T":3},"195":{"N":"Диффузор радиатора","T":1},"196":{"N":"Фильтр АКПП","T":3}}},"15":{"G":"Сувениры","C":2,"B":{"11":{"N":"Набор для рисования Пастель","T":3},"12":{"N":"Брелок-рулетка","T":3},"63":{"N":"Брелок-открывалка","T":3},"64":{"N":"Ручка-стилус шариковая","T":3},"146":{"N":"Браслет","T":3},"147":{"N":"Чехол для очков","T":3},"148":{"N":"Сумка для выставок","T":3}}}}')},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Main")],1)},s=[],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("Cart",{attrs:{products:t.mergedProducts}}),r("div",{staticClass:"tab__wrapper"},t._l(t.productsByCategories,(function(e,n){return r("div",{key:n,staticClass:"tab"},[r("h3",{class:["tab__title",{collapsed:-1!==t.hiddenTabs.indexOf(n)}],on:{click:function(e){return t.toggleTabVisibility(n)}}},[t._v(t._s(e.categoryName))]),-1===t.hiddenTabs.indexOf(n)?r("div",{staticClass:"tab__content"},t._l(e.products,(function(e,n){return r("div",{key:n,staticClass:"tab__product",on:{click:function(r){return t.addToCart(e)}}},[r("span",{staticClass:"tab__product__name"},[t._v(t._s(e.name)+" "),r("strong",[t._v("("+t._s(e.stock)+")")])]),r("span",{staticClass:"tab__product__price"},[t._v(t._s(e.priceRub)+" ₽")])])})),0):t._e()])})),0)],1)},o=[],i=r("5530"),l=r("b85c"),u=(r("b680"),r("a434"),r("c740"),r("1725")),d=r("4110"),_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart"},[r("div",{staticClass:"cart__text",on:{click:t.toggleCartVisibility}},[t._v("Корзина ("+t._s(t.productsCount)+")")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpened,expression:"isOpened"}],staticClass:"cart__modal"},[r("div",{staticClass:"cart__modal__overlay",on:{click:t.toggleCartVisibility}}),r("div",{staticClass:"cart__modal__body"},[r("div",{staticClass:"cart__table__wrapper"},[r("div",{staticClass:"cart__table"},[t._m(0),t.products.length?t._e():r("div",{staticClass:"cart__table__row"},[r("div",{staticClass:"cart__table__td"},[t._v("Пусто")]),r("div",{staticClass:"cart__table__td"}),r("div",{staticClass:"cart__table__td"}),r("div",{staticClass:"cart__table__td"})]),t._l(t.products,(function(e,n){return r("CartProduct",{key:n,attrs:{product:e},on:{deleteProduct:t.deleteProduct}})}))],2)]),r("div",{staticClass:"cart__total"},[t._v("Общая стоимость: "),r("strong",[t._v(t._s(t.total)+" ₽")])])])])])},p=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart__table__row"},[r("div",{staticClass:"cart__table__th"},[t._v("Наименование")]),r("div",{staticClass:"cart__table__th"},[t._v("Кол-во")]),r("div",{staticClass:"cart__table__th"},[t._v("Цена")]),r("div",{staticClass:"cart__table__th"})])}],f=(r("13d5"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart__table__row"},[r("div",{staticClass:"cart__table__td"},[t._v(t._s(t.product.name))]),r("div",{staticClass:"cart__table__td"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.product.count,expression:"product.count",modifiers:{number:!0}}],staticClass:"cart__table__count",attrs:{type:"number",min:"0"},domProps:{value:t.product.count},on:{input:function(e){e.target.composing||t.$set(t.product,"count",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t.isCountMax?r("p",{staticClass:"cart__table__error"},[t._v("Количество ограничено")]):t._e()]),r("div",{staticClass:"cart__table__td cart__table__price"},[r("strong",[t._v(t._s(t.product.priceRub)+" ₽")]),t._v("/ шт.")]),r("div",{staticClass:"cart__table__td cart__table__remove text-right",on:{click:t.deleteFromCart}},[t._v("Удалить")])])}),C=[],v={name:"CartProduct",props:{product:Object},data:function(){return{isCountMax:!1}},watch:{"product.count":{handler:function(t){t>this.product.stock?this.product.count=this.product.stock:t===this.product.stock?(console.log("this.isCountMax = true"),this.isCountMax=!0):this.isCountMax&&(console.log("this.isCountMax = false"),this.isCountMax=!1)}}},methods:{deleteFromCart:function(){this.$emit("deleteProduct",this.product)}}},b=v,h=(r("b39f"),r("2877")),T=Object(h["a"])(b,f,C,!1,null,null,null),m=T.exports,P={name:"Cart",components:{CartProduct:m},props:{products:Array},data:function(){return{isOpened:!1}},watch:{},computed:{productsCount:function(){return this.products.length?this.products.reduce((function(t,e){return t+(""!==e.count?e.count:0)}),0):0},total:function(){return this.products.length?this.products.reduce((function(t,e){return parseFloat((t+e.priceRub*e.count).toFixed(2))}),0):0}},methods:{toggleCartVisibility:function(){this.isOpened=!this.isOpened},deleteProduct:function(t){var e=this.products.findIndex((function(e){return e.productId===t.productId}));this.products.splice(e,1)}}},g=P,N=(r("88b7"),Object(h["a"])(g,_,p,!1,null,null,null)),y=N.exports,x={name:"Main",components:{Cart:y},data:function(){return{USD_RATE:74.21,hiddenTabs:[],mergedProducts:[]}},computed:{productsByCategories:function(){var t,e=u.Value.Goods,r={},n=Object(l["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,s=a["G"],c=a["T"],o=a["C"],i=this.usdTorub(o),_=a["P"],p=d[s]["B"][c]["N"];r[s]||(r[s]={categoryName:d[s]["G"],products:[]}),r[s].products.push({categoryId:s,productId:c,name:p,priceUsd:o,priceRub:i,stock:_})}}catch(f){n.e(f)}finally{n.f()}return r}},methods:{usdTorub:function(t){return parseFloat((t*this.USD_RATE).toFixed(2))},toggleTabVisibility:function(t){var e=this.hiddenTabs.indexOf(t);-1===e?this.hiddenTabs.push(t):this.hiddenTabs.splice(e,1)},addToCart:function(t){var e=this.mergedProducts.findIndex((function(e){return e.productId===t.productId}));if(-1===e){var r=Object(i["a"])({},t);r.count=1,this.mergedProducts.push(r)}else this.mergedProducts[e].count+=1}}},O=x,w=(r("17f2"),Object(h["a"])(O,c,o,!1,null,null,null)),G=w.exports,B={name:"App",components:{Main:G}},V=B,j=(r("034f"),Object(h["a"])(V,a,s,!1,null,null,null)),k=j.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(k)}}).$mount("#app")},"7a34":function(t,e,r){},"85ec":function(t,e,r){},"88b7":function(t,e,r){"use strict";r("8f4f")},"8f4f":function(t,e,r){},"9a00":function(t,e,r){},b39f:function(t,e,r){"use strict";r("7a34")}});
//# sourceMappingURL=app.67f8b640.js.map