<template>
    <div class="section-4-wrapper" data-aos="fade-up" data-aos-delay="50">
        <div class="container section-4-anim-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-4-anim">
                        <div class="svg1">
                            <svg viewBox="0 0 1056 1828" xmlns="http://www.w3.org/2000/svg" v-if="width > 991">
                                <path stroke-linecap="round" fill="none" id="path" d="M8.00002 2C8.00002 2 -57.9999 310 508 310C1074 310 1048 558 1048 558C1048 558 1056.22 823.932 620 786C72.6259 738.402 19.3951 923.427 15.7441 980.021C15.7441 980.021 15.903 979.349 15.7441 980.021C11.5739 997.665 -35.2243 1238 510 1238C1076 1238 1050 1486 1050 1486V1496C1050 1496 1013.3 1681.1 728 1676C244.341 1667.35 266 1827 266 1827" stroke="url(#paint0_linear)" stroke-width="10"/>
                                <defs>
                                <linearGradient id="paint0_linear" x1="85.6409" y1="1.99953" x2="1014.53" y2="12.3369" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#F2F3F3"/>
                                <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                </defs>
                            </svg>
                            <svg viewBox="0 0 349 785" fill="none" xmlns="http://www.w3.org/2000/svg" v-else>
                                <path stroke-linecap="round" fill="none" id="path" d="M13.0001 1C13.0001 1 -19.9999 146 169 146C358 146 344 280.5 344 280.5C343 283 352 414 172 414C-7.99979 414 5.00005 537 5.00005 537 C5.0005 537 -19.9999 676 169 676 C358 676 344 806 344 806" stroke="url(#paint0_linear)" stroke-width="8"/>
                                <defs>
                                <linearGradient id="paint0_linear" x1="30.7906" y1="0.999798" x2="332.663" y2="3.54108" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#F2F3F3"/>
                                <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                </defs>
                            </svg>

                        </div>
                        <div class="svg2">
                            <svg viewBox="0 0 1056 1828" xmlns="http://www.w3.org/2000/svg" v-if="width > 991">
                                <path stroke-linecap="round" fill="none" id="path-2" d="M8.00002 2C8.00002 2 -57.9999 310 508 310C1074 310 1048 558 1048 558C1048 558 1056.22 823.932 620 786C72.6259 738.402 19.3951 923.427 15.7441 980.021C15.7441 980.021 15.903 979.349 15.7441 980.021C11.5739 997.665 -35.2243 1238 510 1238C1076 1238 1050 1486 1050 1486V1496C1050 1496 1013.3 1681.1 728 1676C244.341 1667.35 266 1827 266 1827" stroke="url(#paint0_linear-2)" stroke-width="10"/>
                                <defs>
                                <linearGradient id="paint0_linear-2" x1="157.805" y1="27.3464" x2="1105.76" y2="412.361" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                </defs>
                            </svg>
                            <svg viewBox="0 0 349 785" fill="none" xmlns="http://www.w3.org/2000/svg" v-else>
                                <path stroke-linecap="round" fill="none" id="path-2" d="M13.0001 1C13.0001 1 -19.9999 146 169 146C358 146 344 280.5 344 280.5C343 283 352 414 172 414C-7.99979 414 5.00005 537 5.00005 537 C5.0005 537 -19.9999 676 169 676 C358 676 344 806 344 806" stroke="url(#paint0_linear-2)" stroke-width="8"/>
                                <defs>
                                <linearGradient id="paint0_linear-2" x1="30.7906" y1="0.999798" x2="332.663" y2="3.54108" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <div class="svg3" v-if="width > 991">
                            <svg viewBox="0 0 1074 1858" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M289 1842C289 1850.84 281.837 1858 273 1858C264.163 1858 257 1850.84 257 1842C257 1833.16 264.163 1826 273 1826C281.837 1826 289 1833.16 289 1842Z" fill="url(#paint0_linear)"/>
                                <path d="M32 16C32 24.8366 24.8366 32 16 32C7.16344 32 0 24.8366 0 16C0 7.16344 7.16344 0 16 0C24.8366 0 32 7.16344 32 16Z" fill="url(#paint1_linear)"/>
                                <path d="M1072 575C1072 583.837 1064.84 591 1056 591C1047.16 591 1040 583.837 1040 575C1040 566.163 1047.16 559 1056 559C1064.84 559 1072 566.163 1072 575Z" fill="url(#paint2_linear)"/>
                                <path d="M40 1025C40 1033.84 32.8366 1041 24 1041C15.1634 1041 8 1033.84 8 1025C8 1016.16 15.1634 1009 24 1009C32.8366 1009 40 1016.16 40 1025Z" fill="url(#paint3_linear)"/>
                                <path d="M1074 1504C1074 1512.84 1066.84 1520 1058 1520C1049.16 1520 1042 1512.84 1042 1504C1042 1495.16 1049.16 1488 1058 1488C1066.84 1488 1074 1495.16 1074 1504Z" fill="url(#paint4_linear)"/>
                                <defs>
                                <linearGradient id="paint0_linear" x1="82.2572" y1="-0.000479575" x2="1037.34" y2="10.734" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#F2F3F3"/>
                                    <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                <linearGradient id="paint1_linear" x1="82.2572" y1="-0.000479575" x2="1037.34" y2="10.734" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#F2F3F3"/>
                                    <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                <linearGradient id="paint2_linear" x1="82.2572" y1="-0.000479575" x2="1037.34" y2="10.734" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#F2F3F3"/>
                                    <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                <linearGradient id="paint3_linear" x1="82.2572" y1="-0.000479575" x2="1037.34" y2="10.734" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#F2F3F3"/>
                                    <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                <linearGradient id="paint4_linear" x1="82.2572" y1="-0.000479575" x2="1037.34" y2="10.734" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#F2F3F3"/>
                                    <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                </defs>
                            </svg>
                            <svg viewBox="0 0 1074 1858" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="blue-dot" id="blue-dot-1" d="M32 16C32 24.8366 24.8366 32 16 32C7.16344 32 0 24.8366 0 16C0 7.16344 7.16344 0 16 0C24.8366 0 32 7.16344 32 16Z" fill="url(#paint6_linear)"/>
                                <path class="blue-dot" id="blue-dot-2" d="M1072 575C1072 583.837 1064.84 591 1056 591C1047.16 591 1040 583.837 1040 575C1040 566.163 1047.16 559 1056 559C1064.84 559 1072 566.163 1072 575Z" fill="url(#paint7_linear)"/>
                                <path class="blue-dot" id="blue-dot-3" d="M40 1025C40 1033.84 32.8366 1041 24 1041C15.1634 1041 8 1033.84 8 1025C8 1016.16 15.1634 1009 24 1009C32.8366 1009 40 1016.16 40 1025Z" fill="url(#paint8_linear)"/>
                                <path class="blue-dot" id="blue-dot-4" d="M1074 1504C1074 1512.84 1066.84 1520 1058 1520C1049.16 1520 1042 1512.84 1042 1504C1042 1495.16 1049.16 1488 1058 1488C1066.84 1488 1074 1495.16 1074 1504Z" fill="url(#paint9_linear)"/>
                                <path class="blue-dot" id="blue-dot-5" d="M289 1842C289 1850.84 281.837 1858 273 1858C264.163 1858 257 1850.84 257 1842C257 1833.16 264.163 1826 273 1826C281.837 1826 289 1833.16 289 1842Z" fill="url(#paint5_linear)"/>
                                <defs>

                                <linearGradient id="paint5_linear" x1="259" y1="1832" x2="289" y2="1842" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                <linearGradient id="paint6_linear" x1="2.45087" y1="-8.25963e-06" x2="32" y2="16" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                <linearGradient id="paint7_linear" x1="1042" y1="555" x2="1072" y2="575" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                <linearGradient id="paint8_linear" x1="30" y1="1005" x2="40" y2="1035" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                <linearGradient id="paint9_linear" x1="1044" y1="1500" x2="1074" y2="1504" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <div class="svg3" v-else>
                            <svg viewBox="0 0 357 809" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M27 10C27 15.5228 22.5228 20 17 20C11.4772 20 7 15.5228 7 10C7 4.47715 11.4772 0 17 0C22.5228 0 27 4.47715 27 10Z" fill="url(#paint0_linear)"/>
                                <path d="M357 290C357 295.523 352.523 300 347 300C341.477 300 337 295.523 337 290C337 284.477 341.477 280 347 280C352.523 280 357 284.477 357 290Z" fill="url(#paint1_linear)"/>
                                <path d="M20 546C20 551.523 15.5228 556 10 556C4.47715 556 0 551.523 0 546C0 540.477 4.47715 536 10 536C15.5228 536 20 540.477 20 546Z" fill="url(#paint2_linear)"/>
                                <path d="M353 799C353 804.523 348.523 809 343 809C337.477 809 333 804.523 333 799C333 793.477 337.477 789 343 789C348.523 789 353 793.477 353 799Z" fill="url(#paint3_linear)"/>
                                <defs>
                                <linearGradient id="paint0_linear" x1="27.3425" y1="-0.000208814" x2="344.83" y2="2.72392" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#F2F3F3"/>
                                <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                <linearGradient id="paint1_linear" x1="27.3425" y1="-0.000208814" x2="344.83" y2="2.72392" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#F2F3F3"/>
                                <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                <linearGradient id="paint2_linear" x1="27.3425" y1="-0.000208814" x2="344.83" y2="2.72392" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#F2F3F3"/>
                                <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                <linearGradient id="paint3_linear" x1="27.3425" y1="-0.000208814" x2="344.83" y2="2.72392" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#F2F3F3"/>
                                <stop offset="1" stop-color="#E0E3E6"/>
                                </linearGradient>
                                </defs>
                            </svg>
                            <svg viewBox="0 0 357 809" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="blue-dot" id="blue-dot-1" d="M27 10C27 15.5228 22.5228 20 17 20C11.4772 20 7 15.5228 7 10C7 4.47715 11.4772 0 17 0C22.5228 0 27 4.47715 27 10Z" fill="url(#paint4_linear)"/>
                                <path class="blue-dot" id="blue-dot-2" d="M357 290C357 295.523 352.523 300 347 300C341.477 300 337 295.523 337 290C337 284.477 341.477 280 347 280C352.523 280 357 284.477 357 290Z" fill="url(#paint5_linear)"/>
                                <path class="blue-dot" id="blue-dot-3" d="M20 546C20 551.523 15.5228 556 10 556C4.47715 556 0 551.523 0 546C0 540.477 4.47715 536 10 536C15.5228 536 20 540.477 20 546Z" fill="url(#paint6_linear)"/>
                                <path class="blue-dot" id="blue-dot-4" d="M353 799C353 804.523 348.523 809 343 809C337.477 809 333 804.523 333 799C333 793.477 337.477 789 343 789C348.523 789 353 793.477 353 799Z" fill="url(#paint7_linear)"/>
                                <!-- <path class="blue-dot" id="blue-dot-5" d="M353 799C353 804.523 348.523 809 343 809C337.477 809 333 804.523 333 799C333 793.477 337.477 789 343 789C348.523 789 353 793.477 353 799Z" fill="url(#paint3_linear)"/> -->
                                <defs>
                                <linearGradient id="paint4_linear" x1="7" y1="20" x2="27" y2="10" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                <linearGradient id="paint5_linear" x1="337" y1="300" x2="357" y2="290" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                <linearGradient id="paint6_linear" x1="0" y1="556" x2="20" y2="546" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                <linearGradient id="paint7_linear" x1="333" y1="809" x2="353" y2="799" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#84D3FF"/>
                                <stop offset="1" stop-color="#0491E0"/>
                                </linearGradient>
                                </defs>
                            </svg>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="container section-4">
            <div class="row section-4-row section-4-1" data-aos="fade-up" data-aos-delay="50">
                <div class="col-lg-4 offset-lg-2 section-4-1-left">
                    <h3 class="title-h3">Take the first step</h3>
                    <p class="section-4-text">Deposit money to your account and open up the possibilities of crypto investment</p>
                </div>
                <div class="col-lg-4 offset-lg-1 d-none d-lg-block">
                    <div class="button-style-4 hovered"><i class="button-style-4-img"><img src="~@/assets/images/icon_QR.svg" alt="icon_QR"></i><span class="button-style-4-text">From Crypto Wallet</span></div>
                    <div class="button-style-4"><i class="button-style-4-img"><img src="~@/assets/images/icon_bank.svg" alt="icon_bank"></i><span class="button-style-4-text">Wire Transfer</span></div>
                    <div class="button-style-4"><i class="button-style-4-img"><img src="~@/assets/images/icon_card.svg" alt="icon_card"></i><span class="button-style-4-text">Buy Crypto via bank card</span></div>
                </div>
            </div>
            <div class="row section-4-row section-4-2" data-aos="fade-up" data-aos-delay="50">
                <div class="col-lg-5 offset-lg-1 section-4-img-wrapper d-none d-lg-block">
                    <img class="section-4-img" src="~@/assets/images/chart.svg" alt="chart">
                </div>
                <div class="col-lg-4 section-4-2-right">
                    <h3 class="title-h3">Trade top 15 cryptocurrencies</h3>
                    <p class="section-4-text">Execute trade by yourself or “copy trade” the big winners and earn money straight away. Easy to understand without trading experience</p>
                </div>
            </div>
            <div class="row section-4-row section-4-3" data-aos="fade-up" data-aos-delay="50">
                <div class="col-lg-4 offset-lg-2 section-4-3-left">
                    <h3 class="title-h3">Keep Your Crypto <br>On The Safe Side</h3>
                    <p class="section-4-text">2-Factor Authentication (2FA) and sophisticated Device Authorisation ensures that only you can access your account</p>
                </div>
                <div class="col-lg-4 offset-lg-1 section-4-3-right d-none d-lg-block">
                    <div class="input-wrapper">
                        <center><span class="input-helper">Enter PIN</span></center>
                        <input class="input input-center input-dispas" type="text" disabled placeholder="••••">
                    </div>
                </div>
            </div>
            <div class="row section-4-row section-4-4" data-aos="fade-up" data-aos-delay="50">
                <div class="col-lg-4 offset-lg-2 section-4-4-left d-none d-lg-block">
                    <img class="section-4-4-img" src="~@/assets/images/card.svg" alt="card">
                </div>
                <div class="col-lg-4 offset-lg-1 section-4-4-right">
                    <h3 class="title-h3">Spend Your Crypto Instantly</h3>
                    <p class="section-4-text">DAX gives you the power to spend your cryptocurrency in real life, anywhere Card is accepted</p>
                </div>
            </div>
            <div class="row section-4-5">
                <div class="col-lg-4 offset-lg-2 section-4-5-left" data-aos="fade-up" data-aos-delay="50">
                    <h2 class="title-h2"><span class="color-black">Register with</span> <span class="color-blue">DAX</span></h2>
                    <form action="" class="form">

                        <div class="form-row">
                            <div class="col">
                                <div class="input-wrapper select-wrapper">
                                    <input type="text" class="input select" placeholder="Country">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-3">
                                <div class="input-wrapper">
                                    <input type="text" class="input input-center" placeholder="Code">
                                </div>
                            </div>
                            <div class="col-9">
                                <div class="input-wrapper">
                                    <input type="text" class="input" placeholder="Phone number">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col">
                                <div class="form-checkbox">
                                    <input type="checkbox" id="form-checkbox" class="form-checkbox-input">
                                    <label for="form-checkbox" class="form-checkbox-label">I accept the <a href="#">Terms & Conditions</a> and <a href="#">Privacy Policy</a></label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col">
                                <button type="submit" class="button-style-2">Sign up for free</button>
                            </div>
                        </div>
                        <div class="section-1-img d-block d-lg-none">
                            <a href="#"><img src="~@/assets/images/appstore.svg" alt="appstore"></a>
                            <a href="#"><img src="~@/assets/images/googleplay.svg" alt="googleplay"></a>
                        </div>
                    </form>
                </div>
                <div class="col-lg-4 offset-lg-1 section-4-5-right d-none d-lg-block" data-aos="fade-up" data-aos-delay="200">
                    <img src="~@/assets/images/mob.svg" alt="mob">
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import Scrollbar from 'smooth-scrollbar';
// import scrollAnimations from '../../node_modules/scroll-animations/src/index.js'; 

export default {
    name: 'Section4',
    data: () => ({
        width: 0
    }),
    created: function(){
        window.addEventListener('resize', this.resize)
        this.resize()
    },
    methods:{
        resize: function(){
            this.width = window.innerWidth
            console.log(this.width)
        },
        detectmob: function() { 
            if( navigator.userAgent.match(/Android/i)
            || navigator.userAgent.match(/webOS/i)
            || navigator.userAgent.match(/iPhone/i)
            || navigator.userAgent.match(/iPad/i)
            || navigator.userAgent.match(/iPod/i)
            || navigator.userAgent.match(/BlackBerry/i)
            || navigator.userAgent.match(/Windows Phone/i)
            ){
                return true;
            }
            else {
                return false;
            }
        }
    },
    mounted: function(){
        

        let _this = this;
        // Get a reference to the <path>
        var path = document.querySelector('#path-2');

        // Get length of path... ~577px in this case
        var pathLength = path.getTotalLength();

        // Make very long dashes (the length of the path itself)
        path.style.strokeDasharray = pathLength + ' ' + pathLength;

        // Offset the dashes so the it appears hidden entirely
        path.style.strokeDashoffset = pathLength;

        // Jake Archibald says so
        // https://jakearchibald.com/2013/animated-line-drawing-svg/
        path.getBoundingClientRect();

        // When the page scrolls...
        // if(!this.detectmob()){
        //     window.addEventListener("scroll", animateOnScroll);
        //     window.removeEventListener("touchmove", animateOnScroll);
        // }else{
        //     window.addEventListener("touchmove", animateOnScroll);
        //     window.removeEventListener("scroll", animateOnScroll);
        // }


        const scrollArea = document.getElementById('scrollbar')

        const Scroll = Scrollbar.init(scrollArea)

        // Scroll.addListener((s) => {
        //     console.log(s.offset.y) // returns “scrollTop” equivalent
        // })

        Scroll.addListener(animateOnScroll)
        let arr = []
        arr.forEach.call(document.querySelectorAll('[data-aos]'), (el) => {
            Scroll.addListener(() => {
                if (Scroll.isVisible(el)) {
                    el.classList.add('aos-animate');
                }else{
                    el.classList.remove('aos-animate');
                }
            });
        });

        function animateOnScroll(s){
        
            // What % down is it? 
            // https://stackoverflow.com/questions/2387136/cross-browser-method-to-determine-vertical-scroll-percentage-in-javascript/2387222#2387222
            // Had to try three or four differnet methods here. Kind of a cross-browser nightmare.
            // var scrollPercentage = (document.documentElement.scrollTop + document.body.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);
            var scrollPercentage = (s.offset.y - document.querySelector('.section-4-wrapper').offsetTop + document.documentElement.clientHeight/3) / (document.querySelector('.section-4-wrapper').scrollHeight - document.documentElement.clientHeight);
                // console.log(_this.width)
                console.log(s.offset.y)

            if(_this.width > 991){
                toggleDotVisibility('#blue-dot-1', 0)
                toggleDotVisibility('#blue-dot-2', 0.277)
                toggleDotVisibility('#blue-dot-3', 0.543)
                toggleDotVisibility('#blue-dot-4', 0.805)
                toggleDotVisibility('#blue-dot-5', 0.99)
            }else{
                toggleDotVisibility('#blue-dot-1', 0)
                toggleDotVisibility('#blue-dot-2', 0.328)
                toggleDotVisibility('#blue-dot-3', 0.654)
                toggleDotVisibility('#blue-dot-4', 0.98)
            }

            function toggleDotVisibility(id,percentage){
                if(document.querySelector(id)){
                    if(scrollPercentage > percentage){
                        document.querySelector(id).classList.add('blue-dot-show')
                    }else{
                        document.querySelector(id).classList.remove('blue-dot-show')
                    }
                }
            }
            // Length to offset the dashes
            var drawLength = pathLength * scrollPercentage;
            
            // Draw in reverse
            path.style.strokeDashoffset = pathLength - drawLength;
                
            // When complete, remove the dash array, otherwise shape isn't quite sharp
            // Accounts for fuzzy math
            if (scrollPercentage >= 0.99) {
                path.style.strokeDasharray = "none";
                
            } else {
                path.style.strokeDasharray = pathLength + ' ' + pathLength;
            }
        }
    }
}
</script>